Functions
===

```sql
DROP FUNCTION IF EXISTS tokens;
CREATE FUNCTION tokens(data TEXT, field TEXT) RETURNS TEXT DETERMINISTIC
RETURN (SELECT JSON_UNQUOTE(JSON_EXTRACT(CONCAT('{"', REPLACE(REPLACE(data, ':', '":"'),"|",'","'),'"}'), CONCAT("$.", field))) as field);

DROP FUNCTION IF EXISTS token;
CREATE FUNCTION token(data TEXT) RETURNS TEXT DETERMINISTIC
RETURN (SELECT SUBSTRING_INDEX(data, ":", -1));
```